### Tutorial: Crear una Base de Datos SQL Server en Docker

En este tutorial, aprender√°s a crear una base de datos SQL Server utilizando Docker. Esto es √∫til para desarrollar aplicaciones que requieren una base de datos SQL Server sin necesidad de instalarla directamente en tu m√°quina. Utilizaremos un contenedor Docker para ejecutar SQL Server y configurar una base de datos.

---

#### Requisitos Previos

1. **Docker instalado**: Aseg√∫rate de tener Docker instalado en tu sistema. Puedes descargarlo desde [aqu√≠](https://www.docker.com/products/docker-desktop).
2. **Conocimientos b√°sicos de Docker**: Familiar√≠zate con los conceptos b√°sicos de Docker, como im√°genes, contenedores y comandos comunes.
3. **Herramientas de gesti√≥n de bases de datos**: Puedes usar herramientas como **SQL Server Management Studio (SSMS)** o **Azure Data Studio** para conectarte a la base de datos.

---

### Paso 1: Ejecutar SQL Server en un Contenedor Docker

Para crear una instancia de SQL Server en Docker, utilizaremos el siguiente comando:

```bash
docker run -e "ACCEPT_EULA=Y" -e "SA_PASSWORD=Ecomm3rc3SqL$" -p 1433:1433 --name "sql-server-ecommerce" -d mcr.microsoft.com/mssql/server
```

#### Explicaci√≥n del comando:

- **`docker run`**: Comando para crear y ejecutar un contenedor.
- **`-e "ACCEPT_EULA=Y"`**: Acepta los t√©rminos de licencia de SQL Server. Es obligatorio para usar la imagen de SQL Server.
- **`-e "SA_PASSWORD=Ecomm3rc3SqL$"`**: Establece la contrase√±a del usuario `sa` (administrador del sistema). **Nota**: La contrase√±a debe cumplir con los requisitos de complejidad de SQL Server (may√∫sculas, min√∫sculas, n√∫meros y caracteres especiales).
- **`-p 1433:1433`**: Mapea el puerto 1433 del contenedor (puerto predeterminado de SQL Server) al puerto 1433 de tu m√°quina.
- **`--name "sql-server-ecommerce"`**: Asigna un nombre al contenedor para facilitar su gesti√≥n.
- **`-d`**: Ejecuta el contenedor en segundo plano (modo "detached").
- **`mcr.microsoft.com/mssql/server`**: Especifica la imagen oficial de SQL Server para Docker.

---

### Paso 2: Verificar que el Contenedor Est√© en Ejecuci√≥n

Despu√©s de ejecutar el comando, verifica que el contenedor est√© en funcionamiento:

```bash
docker ps
```

Deber√≠as ver una salida similar a esta:

```
CONTAINER ID   IMAGE                          COMMAND                  CREATED         STATUS         PORTS                    NAMES
abc123def456   mcr.microsoft.com/mssql/server "/opt/mssql/bin/sqls‚Ä¶"   2 minutes ago   Up 2 minutes   0.0.0.0:1433->1433/tcp   sql-server-ecommerce
```

Si el contenedor no aparece, revisa los logs para identificar el problema:

```bash
docker logs sql-server-ecommerce
```

---

### Paso 3: Conectarse a la Base de Datos

Ahora que SQL Server est√° en ejecuci√≥n, puedes conectarte a la base de datos utilizando una herramienta de gesti√≥n como **SQL Server Management Studio (SSMS)** o **Azure Data Studio**.

#### Detalles de conexi√≥n:
- **Servidor**: `localhost,1433`
- **Autenticaci√≥n**: `SQL Server Authentication`
- **Usuario**: `sa`
- **Contrase√±a**: `Ecomm3rc3SqL$`

#### Ejemplo de conexi√≥n en SSMS:
1. Abre SQL Server Management Studio.
2. En el campo "Nombre del servidor", ingresa: `localhost,1433`.
3. Selecciona "Autenticaci√≥n de SQL Server".
4. Ingresa el nombre de usuario `sa` y la contrase√±a `Ecomm3rc3SqL$`.
5. Haz clic en "Conectar".

---

### Paso 4: Crear una Base de Datos

Una vez conectado, puedes crear una base de datos ejecutando el siguiente comando SQL:

```sql
CREATE DATABASE EcommerceDB;
```

#### Verificar la creaci√≥n de la base de datos:
```sql
SELECT name FROM sys.databases;
```

Deber√≠as ver `EcommerceDB` en la lista de bases de datos.

---

### Paso 5: Configurar la Cadena de Conexi√≥n en tu Aplicaci√≥n

Para que tu aplicaci√≥n se conecte a la base de datos, configura la cadena de conexi√≥n en tu archivo de configuraci√≥n (por ejemplo, `appsettings.json` en .NET):

```json
{
  "ConnectionStrings": {
    "DefaultConnection": "Server=localhost,1433;Database=EcommerceDB;User Id=sa;Password=Ecomm3rc3SqL$;TrustServerCertificate=True;"
  }
}
```

#### Explicaci√≥n de la cadena de conexi√≥n:
- **Server**: Especifica la direcci√≥n del servidor (`localhost,1433`).
- **Database**: Nombre de la base de datos (`EcommerceDB`).
- **User Id**: Nombre de usuario (`sa`).
- **Password**: Contrase√±a del usuario (`Ecomm3rc3SqL$`).
- **TrustServerCertificate**: Habilita la confianza en el certificado del servidor (√∫til para entornos de desarrollo).

---

### Paso 6: Detener y Eliminar el Contenedor (Opcional)

Si ya no necesitas el contenedor, puedes detenerlo y eliminarlo:

1. Detener el contenedor:
   ```bash
   docker stop sql-server-ecommerce
   ```

2. Eliminar el contenedor:
   ```bash
   docker rm sql-server-ecommerce
   ```

---

### Conclusi√≥n

En este tutorial, has aprendido a:
1. Ejecutar SQL Server en un contenedor Docker.
2. Conectarte a la base de datos utilizando herramientas de gesti√≥n.
3. Crear una base de datos y configurar la cadena de conexi√≥n en tu aplicaci√≥n.

Este enfoque es ideal para entornos de desarrollo, ya que te permite tener una instancia de SQL Server sin necesidad de instalarla directamente en tu m√°quina. ¬°Ahora est√°s listo para desarrollar aplicaciones con SQL Server en Docker! üöÄ

---

### Recursos Adicionales
- [Documentaci√≥n oficial de SQL Server en Docker](https://docs.microsoft.com/en-us/sql/linux/quickstart-install-connect-docker?view=sql-server-ver15)
- [Gu√≠a de Docker para principiantes](https://docs.docker.com/get-started/)